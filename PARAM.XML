<!-- The syntax is described by share/Scripts/CheckParam.pl and the manual -->

<commandList name="MFLAMPA: SP Component">
<set name="NameComp"          type="string" value="$SP"/>
<set name="NameRestartOutDir" type="string" value="$NameComp/restartOUT"/>
<set name="NamePlotDir"       type="string" value="$NameComp/IO2"/>

List of commands used in the PARAM.in file for MFLAMPA configured as the SP 
component of the SWMF.
<command name="COMPDOMAINS">
	<parameter name="RMin" type="real" min="-1" default="-1" />
	<parameter name="RBufferMin"  type="real" min="-1" default="-1" />
	<parameter name="RBufferMax"  type="real" min="-1" default="-1" />
	<parameter name="RMax"  type="real" min="-1" default="-1" />
Sets the ranges of heliocentric distances for domains in SC and IH exchanging
data with SP.

#COMPDOMAINS
1.15            RScMin [Rs]
19.0            RIhMin [Rs]
21.0            RScMax [Rs]
220.0           RIhMax [Rs]

</command>

<command name="ORIGIN">
	<parameter name="ROrigin" type="real" min="1" default="2.5"/>
	<parameter name="LonMin"  type="real" min="0" max="359" default="0"/>
	<parameter name="LatMin"  type="real" min="-90" max="89" default="-70"/>
	<parameter name="LonMax"  type="real" min="1" max="360" default="360"/>
	<parameter name="LatMax"  type="real" min="-89" max="90" default="70"/>

Origin points on the surface R=ROrigin in the intervals of longitude,
(LonMin,LonMax) and latitude, (LatMin,LatMax). Originating from these
points are the magnetic field lines traced down from ROrigin to RScMin
and up from ROrigin to RIhMax. 
 
#ORIGIN
2.5            ROrigin [Rs]
0.0             LonMin [deg]
-70.0           LatMin [deg]
360.0           LonMax [deg]
70.0            LatMax [deg]

</command>
<commandgroup name="STAND ALONE MODE">
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!! STAND ALONE PARAMETERS !!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!


<command name="STARTTIME" alias="SETREALTIME" if="$_IsStandAlone">
	<parameter name="iYear"   type="integer" default="2000" />
	<parameter name="iMonth"  type="integer" min="1" max="12" default="3"/>
	<parameter name="iDay"   type="integer" min="1" max="31" default="21"/>
	<parameter name="iHour"   type="integer" min="0" max="23" default="10"/>
	<parameter name="iMinute" type="integer" min="0" max="59" default="45"/>
	<parameter name="iSecond" type="integer" min="0" max="59" default="0"/>

#STARTTIME
2000			iYear
   3			iMonth
  22			iDay
  10			iHour
  45			iMinute
   0			iSecond

This command can only be used in the first session.

The #STARTTIME command sets the date and time in Greenwich Mean Time
(GMT) or Universal Time (UT) when the simulation starts.

There is no default value.
</command>

<command name="BEGIN_COMP" multiple="T" if="$_IsStandAlone">

This command is allowed in stand alone mode only for the sake of the 
test suite, which contains these commands when the framework is tested.
</command>

<command name="END_COMP" multiple="T" if="$_IsStandAlone">

This command is allowed in stand alone mode only for the sake of the 
test suite, which contains these commands when the framework is tested.
</command>

<command name="RUN" if="$_IsStandAlone">

#RUN

This command is only used in stand alone mode.

The #RUN command does not have any parameters. It signals the end
of the current session, and makes MFLAMPA execute the session with
the current set of parameters. The parameters for the next session
start after the #RUN command. For the last session there is no
need to use the #RUN command, since the #END command or simply
the end of the PARAM.in file makes MFLAMPA execute the last session.
</command>

<command name="END">

#END

The #END command signals the end of the included file or the
end of the PARAM.in file. Lines following the #END command are
ignored. It is not required to use the #END command. The end
of the included file or PARAM.in file is equivalent with an 
#END command in the last line.
</command>

</commandgroup>
<commandgroup name="STOPPING CRITERIA">
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!! STOPPING CRITERIA !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

The commands in this group only work in stand alone mode.

<command name="STOP" if="$_IsStandAlone">
	<parameter name="nIterMax" type="integer" min="-1" default="-1" />
	<parameter name="TimeMax" type="real"  min="-1" default="-1" />

#STOP
-1			nIterMax
600.0			TimeMax [sec]

This command is only used in stand alone mode.

The nIterMax variable contains the
maximum number of iterations {\it since the beginning of the current run}
(in case of a restart, the time steps done before the restart do not count).
If nIteration reaches this value the session is finished.
The TimeMax variable contains the maximum simulation time
relative to the initial time determined by the #STARTTIME command.
If tSimulation reaches this value the session is finished.

Using a negative value for either variables means that the
corresponding condition is  not checked. 

The #STOP command must be used in every session.
</command>


<command name="CHECKSTOPFILE" if="$_IsStandAlone">
	<parameter name="DoCheckStopFile" type="logical" default="T" />

#CHECKSTOPFILE
T			DoCheckStopFile

This command is only used in stand alone mode.

If DoCheckStopFile is true then the code checks if the
MFLAMPA.STOP file exists in the run directory. This file is deleted at
the beginning of the run, so the user must explicitly create the file
with e.g. the "touch MFLAMPA.STOP" UNIX command.
If the file is found in the run directory,
the execution stops in a graceful manner.
Restart files and plot files are saved as required by the
appropriate parameters.

The default is DoCheckStopFile=.true.
</command>

<command name="CPUTIMEMAX" if="$_IsStandAlone">
	<parameter name="CpuTimeMax" type="real" min="-1" default="-1" />

#CPUTIMEMAX
3600                    CpuTimeMax [sec]

This command is only used in stand alone mode.

The CpuTimeMax variable contains the maximum allowed CPU time (wall clock
time) for the execution of the current run. If the CPU time reaches
this time, the execution stops in a graceful manner.
Restart files and plot files are saved as required by the
appropriate parameters.
This command is very useful when the code is submitted to a batch
queue with a limited wall clock time.

The default value is -1.0, which means that the CPU time is not checked.
To do the check the CpuTimeMax variable has to be set to a positive value.
</command>
</commandgroup>


<commandgroup name="GRID">
Parameters of the Lagrangian grid used in MFLAMPA 
<command name="CHECKGRIDSIZE">
	<parameter name="nParticleMax" type="integer" default="2000" />
	<parameter name="nLon"  type="integer" default="20" />
	<parameter name="nLat"  type="integer" default="20" />
Check if the configured parameters of the Lagrangian grid match those
assumed in the input files

#CHECKGRIDSIZE
 1000     nParticleMax
    4     nLon
    4     nLat
</command>

<command name="COORDSYSTEM" alias="COORDINATESYSTEM" if="$_IsFirstSession">
	<parameter name="TypeCoordSystem" type="string" input="select"/>
		<option name="HGR" default="T"/>
		<option name="HGI"/>
		<option name="HGC"/>

Type of heliocentric coordinate system used in MFLAMPA (HGI, HGR, HGC).

#COORDSYSTEM
HGI       TypeCoordSystem

</command>
</commandgroup>

<commandgroup name="ADVANCE">

<command name="INJECTION">
	<parameter name="CInj" type="real" default="1.0" />
	<parameter name="SpectralIndex" type="real" default="5.0" />

#INJECTION
5.0     SpectralIndex
1.0     Efficency

</command>

<command name="CFL">
	<parameter name="Cfl" type="real" default="1.0" />

#CFL
1.0     Cfl

</command>
	

</commandgroup>

<commandgroup name="ACTION">

<command name="RESTART">
	<parameter name="DoRestart" type="logical" default="F" />

#RESTART
T	DoRestart


The default values are shown.
</command>
<command name="DORUN">
	<parameter name="DoRun" type="logical" default="F" />

#DORUN
T	DoRun


The default values are shown.
</command>

</commandgroup>

<commandgroup name="INPUT/OUTPUT">
<command name="USEDATETIME">
	 <parameter name="UseDateTime" type="logical" default="F" />

#USEDATETIME
T          UseDateTime 

Set the format for the output file names like _eYYYYMMDD_HHMMSS tagging
the file with real date and UT tume instant. When unset (default) the
time tag looks like _tHHMMSS, where HHMMSS is the simulation time in hours-
minutes-seconds passed after the initial time (set by the command #STARTTIME)

</command>

<command name="SAVEINITIAL">
	 <parameter name="DoSaveInitial" type="logical" default="T" />

#SAVEINITIAL
T          DoSaveInitial 

As the default (DoSaveInitial=T) the MFLAMPA saves datasets (at least the
MHD information) starting from the initial state prior to the run. However,
once MFLAMPA restarts, it is useful to set DoSaveInitial to F, in order
to avoid rewriting the output files and eliminate duplicate tags in the file
tag list, becuase the same output files and tags were saved at the end of 
previous run.
 
</command>

<command name="MHDATA" alias="READMHDATA" if="$_IsFirstSession">
	<parameter name="DoReadMhData" type="logical" default="F" />

#DOMHDATA
T	DoReadMhData


The default values are shown.
</command>


</commandgroup>

</commandList>
